# Garage Lights - Occupancy Control
# ID: 1752200642222
# Category: lighting
# Description: Turns light on with door open, turns off when occupancy is clear.

- id: '1752200642222'
  alias: Garage Lights - Occupancy Control
  description: Turns light on with door open, turns off when occupancy is clear.
  triggers:
  - entity_id:
    - binary_sensor.garage_door_contact
    to: 'on'
    id: door_opened
    trigger: state
    from: 'off'
  - entity_id:
    - binary_sensor.garage_door_occupancy
    to: 'off'
    id: occupancy_cleared
    trigger: state
    from: 'on'
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: door_opened
      sequence:
      - action: switch.turn_on
        target:
          entity_id: switch.garage_main_lights
        data: {}
    - conditions:
      - condition: trigger
        id: occupancy_cleared
      - condition: state
        entity_id: binary_sensor.garage_door_contact
        state: 'off'
      sequence:
      - action: switch.turn_off
        target:
          entity_id: switch.garage_main_lights
        data: {}
  mode: single