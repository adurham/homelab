# Water Heater Circulator Pump - Turn Off
# Turns off pump when runtime timer completes and starts cooldown timer
- id: 'water_heater_pump_turn_off'
  alias: 'Water Heater Pump - Turn Off'
  description: 'Turns off pump when runtime timer completes and starts cooldown'
  triggers:
    - platform: event
      event_type: timer.finished
      event_data:
        entity_id: timer.water_heater_pump_runtime
  action:
    - service: system_log.write
      data:
        message: 'Water heater pump runtime complete - turning off and starting 10-minute cooldown'
        level: info
    - service: switch.turn_off
      target:
        entity_id: switch.shelly1minig3_28372f21c1dc
    - service: timer.start
      target:
        entity_id: timer.water_heater_pump_cooldown
      data:
        duration: '00:10:00'
    - service: timer.cancel
      target:
        entity_id: timer.water_heater_pump_runtime
  mode: single

