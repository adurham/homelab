# Water Heater Circulator Pump - Runtime Tracking
# Tracks daily runtime statistics
- id: 'water_heater_pump_runtime_tracking'
  alias: 'Water Heater Pump - Runtime Tracking'
  description: 'Tracks daily runtime statistics'
  triggers:
    - platform: state
      entity_id: switch.shelly1minig3_28372f21c1dc
      to: 'on'
  action:
    - variables:
        kitchen_priority: "{{ is_state('input_boolean.water_heater_pump_kitchen_priority', 'on') }}"
        target_runtime: "{{ 20 if kitchen_priority else 15 }}"
    - service: counter.increment
      target:
        entity_id: counter.water_heater_pump_daily_cycles
    - service: system_log.write
      data:
        message: >-
          Water heater pump started - Daily cycles:
          {{ states("counter.water_heater_pump_daily_cycles") }}, Runtime:
          {{ states("input_number.water_heater_pump_daily_runtime_hours") }}h,
          Target cycle length: {{ target_runtime }} minutes,
          Kitchen priority: {{ 'enabled' if kitchen_priority else 'disabled' }}
        level: info
  mode: single
