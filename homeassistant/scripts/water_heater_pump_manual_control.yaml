# Water Heater Circulator Pump - Manual Control Scripts

# Manual pump on
water_heater_pump_manual_on:
  alias: "Water Heater Pump - Manual On"
  description: "Manually turn on the water heater pump"
  sequence:
    - service: switch.turn_on
      target:
        entity_id: switch.shelly1minig3_28372f21c1dc
    - service: system_log.write
      data:
        message: "Water heater pump manually turned ON"
        level: info

# Manual pump off
water_heater_pump_manual_off:
  alias: "Water Heater Pump - Manual Off"
  description: "Manually turn off the water heater pump"
  sequence:
    - service: switch.turn_off
      target:
        entity_id: switch.shelly1minig3_28372f21c1dc
    - service: timer.cancel
      target:
        entity_id:
          - timer.water_heater_pump_runtime
          - timer.water_heater_pump_cooldown
    - service: system_log.write
      data:
        message: "Water heater pump manually turned OFF"
        level: info

# Reset all timers and counters
water_heater_pump_reset:
  alias: "Water Heater Pump - Reset All"
  description: "Reset all timers, counters, and statistics"
  sequence:
    - service: switch.turn_off
      target:
        entity_id: switch.shelly1minig3_28372f21c1dc
    - service: timer.cancel
      target:
        entity_id:
          - timer.water_heater_pump_runtime
          - timer.water_heater_pump_cooldown
    - service: counter.reset
      target:
        entity_id: counter.water_heater_pump_daily_cycles
    - service: input_number.set_value
      target:
        entity_id: input_number.water_heater_pump_daily_runtime_hours
      data:
        value: 0
    - service: system_log.write
      data:
        message: "Water heater pump system reset - all timers and counters cleared"
        level: info

# Test presence detection
water_heater_pump_test_presence:
  alias: "Water Heater Pump - Test Presence"
  description: "Test the presence detection system"
  sequence:
    - service: system_log.write
      data:
        message: "Testing water heater pump presence detection..."
        level: info
    - service: automation.trigger
      target:
        entity_id: automation.water_heater_pump_presence_detected
